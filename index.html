<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Simulación de Plano Inclinado con Polea</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f6f8;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
        }
        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 20px;
        }
        .control-group {
            background: #ffffff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            flex: 1 1 200px;
            max-width: 250px;
        }
        .control-group label {
            display: block;
            margin-bottom: 5px;
            color: #34495e;
            font-weight: bold;
        }
        .control-group input[type="range"] {
            width: 100%;
        }
        canvas {
            border: 2px solid #2c3e50;
            display: block;
            margin: 0 auto;
            background-color: #ecf0f1;
        }
        .button-group {
            text-align: center;
            margin-top: 20px;
        }
        button {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background-color: #3498db;
        }
        .pulley-options {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Simulación de Plano Inclinado con Polea</h1>

    <div class="controls">
        <div class="control-group">
            <label for="angle">Ángulo del Plano (<span id="angleValue">30</span>°)</label>
            <input type="range" id="angle" min="10" max="80" value="30">
        </div>
        <div class="control-group">
            <label for="length">Longitud del Plano (<span id="lengthValue">5</span> m)</label>
            <input type="range" id="length" min="2" max="10" step="0.1" value="5">
        </div>
        <div class="control-group">
            <label for="mass">Masa del Objeto (<span id="massValue">10</span> kg)</label>
            <input type="range" id="mass" min="1" max="50" step="1" value="10">
        </div>
        <div class="control-group">
            <label><input type="checkbox" id="pulley"> Incluir Polea</label>
            <div class="pulley-options" id="pulleyOptions">
                <label for="counterMass">Masa del Contrapeso (<span id="counterMassValue">5</span> kg)</label>
                <input type="range" id="counterMass" min="1" max="50" step="1" value="5">
            </div>
        </div>
    </div>

    <canvas id="simulationCanvas" width="800" height="500"></canvas>

    <div class="button-group">
        <button onclick="startSimulation()">Iniciar Simulación</button>
        <button onclick="resetSimulation()">Reiniciar</button>
    </div>

    <script>
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');

        // Parámetros iniciales
        let angle = 30;
        let length = 5;
        let mass = 10;
        let usePulley = false;
        let pulleyConfig = { counterMass: 5 };

        // Variables de simulación
        let position = 0;
        let velocity = 0;
        let isSimulating = false;

        // Escalado y posiciones
        let scaleFactor = 80;
        let baseX = 50;
        let baseY = canvas.height - 50;
        let planeWidth, planeHeight;

        // Capturar controles
        document.getElementById('angle').addEventListener('input', (e) => {
            angle = parseInt(e.target.value);
            document.getElementById('angleValue').textContent = angle;
            setupCanvas();
            drawSimulation();
        });
        document.getElementById('length').addEventListener('input', (e) => {
            length = parseFloat(e.target.value);
            document.getElementById('lengthValue').textContent = length;
            setupCanvas();
            drawSimulation();
        });
        document.getElementById('mass').addEventListener('input', (e) => {
            mass = parseFloat(e.target.value);
            document.getElementById('massValue').textContent = mass;
            drawSimulation();
        });
        document.getElementById('pulley').addEventListener('change', (e) => {
            usePulley = e.target.checked;
            document.getElementById('pulleyOptions').style.display = usePulley ? 'block' : 'none';
            drawSimulation();
        });
        document.getElementById('counterMass').addEventListener('input', (e) => {
            pulleyConfig.counterMass = parseFloat(e.target.value);
            document.getElementById('counterMassValue').textContent = pulleyConfig.counterMass;
            drawSimulation();
        });

        function setupCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;

            const angleRad = angle * Math.PI / 180;

            const maxPlaneWidth = canvas.width * 0.7;
            scaleFactor = maxPlaneWidth / length;

            planeWidth = length * scaleFactor;
            planeHeight = planeWidth * Math.tan(angleRad);

            const maxHeight = canvas.height * 0.6;
            if (planeHeight > maxHeight) {
                planeHeight = maxHeight;
                planeWidth = planeHeight / Math.tan(angleRad);
                scaleFactor = planeWidth / length;
            }

            baseX = 50;
            baseY = canvas.height - 50;
        }

        function drawSimulation() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const objectX = baseX + (position / length) * planeWidth;
            const objectY = baseY - (position / length) * planeHeight;

            // Plano inclinado
            ctx.beginPath();
            ctx.moveTo(baseX, baseY);
            ctx.lineTo(baseX + planeWidth, baseY - planeHeight);
            ctx.lineTo(baseX + planeWidth, baseY);
            ctx.closePath();
            ctx.fillStyle = "#a3c9a8";
            ctx.fill();
            ctx.strokeStyle = "#000";
            ctx.stroke();

            // Polea
            if (usePulley) {
                drawPulleySystem(objectX, objectY);
            }

            // Objeto
            const objectSize = 20 + mass / 3;
            ctx.beginPath();
            ctx.arc(objectX, objectY, objectSize, 0, Math.PI * 2);
            ctx.fillStyle = "#e63946";
            ctx.fill();
            ctx.strokeStyle = "#c1121f";
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = '#000';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${mass} kg`, objectX, objectY - objectSize - 5);

            // Ángulo
            ctx.beginPath();
            ctx.arc(baseX, baseY, 30, -angle * Math.PI / 180, 0, false);
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = '#e74c3c';
            ctx.font = '16px Arial';
            ctx.fillText(`${angle}°`, baseX + 40, baseY - 10);
        }

        function drawPulleySystem(objectX, objectY) {
            const pulleyX = baseX + planeWidth;
            const pulleyY = baseY - planeHeight;
            const pulleyRadius = 25;

            ctx.beginPath();
            ctx.arc(pulleyX, pulleyY, pulleyRadius, 0, Math.PI * 2);
            ctx.strokeStyle = '#8e44ad';
            ctx.lineWidth = 3;
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(pulleyX - 40, pulleyY - 30);
            ctx.lineTo(pulleyX + 40, pulleyY - 30);
            ctx.strokeStyle = '#7f8c8d';
            ctx.lineWidth = 4;
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(objectX, objectY);
            ctx.lineTo(pulleyX, pulleyY);
            ctx.strokeStyle = '#d35400';
            ctx.lineWidth = 2;
            ctx.stroke();

            const counterWeightY = pulleyY + 100 + (position / length) * 50;
            const counterWeightSize = 20 + pulleyConfig.counterMass / 3;

            ctx.beginPath();
            ctx.rect(pulleyX - counterWeightSize, counterWeightY, counterWeightSize * 2, counterWeightSize * 2);
            ctx.fillStyle = '#3498db';
            ctx.fill();
            ctx.strokeStyle = '#2980b9';
            ctx.stroke();

            ctx.fillStyle = '#000';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${pulleyConfig.counterMass} kg`, pulleyX, counterWeightY + counterWeightSize * 2 + 15);

            ctx.beginPath();
            ctx.moveTo(pulleyX, pulleyY + pulleyRadius);
            ctx.lineTo(pulleyX, counterWeightY);
            ctx.strokeStyle = '#d35400';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function startSimulation() {
            if (isSimulating) return;
            isSimulating = true;
            simulate();
        }

        function resetSimulation() {
            isSimulating = false;
            position = 0;
            velocity = 0;
            drawSimulation();
        }

        function simulate() {
            if (!isSimulating) return;

            const g = 9.81;
            const angleRad = angle * Math.PI / 180;
            let netForce = mass * g * Math.sin(angleRad);

            if (usePulley) {
                const tension = pulleyConfig.counterMass * g;
                netForce = mass * g * Math.sin(angleRad) - tension;
            }

            const acceleration = netForce / mass;
            const dt = 0.05;

            velocity += acceleration * dt;
            position += velocity * dt;

            if (position < 0) {
                position = 0;
                velocity = 0;
            }
            if (position > length) {
                position = length;
                velocity = 0;
                isSimulating = false;
            }

            drawSimulation();
            requestAnimationFrame(simulate);
        }

        setupCanvas();
        drawSimulation();
    </script>
</body>
</html>

